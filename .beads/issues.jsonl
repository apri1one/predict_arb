{"id":"predict-engine-0yh","title":"Esports Market Matching","description":"为电竞市场（LPL/LCK/LEC等）添加 Predict ↔ Polymarket 的自动匹配支持。\n\n背景：\n- Predict 官方的 polymarketConditionIds 映射是对 Kalshi 的，不是 Polymarket\n- 对于 LPL 等电竞赛事需要自己维护映射\n- 两边的 slug 格式一致：lol-{team1}-{team2}-{date}\n\n目标：\n- 自动匹配 Predict 和 Polymarket 的电竞市场\n- 支持 LPL/LCK/LEC/LCS 等主要联赛","status":"closed","priority":2,"issue_type":"epic","owner":"313818296@qq.com","created_at":"2026-01-23T14:35:40.2657667+08:00","created_by":"apri1one","updated_at":"2026-01-23T14:55:57.0008073+08:00","closed_at":"2026-01-23T14:55:57.0008073+08:00","close_reason":"电竞市场匹配功能已完成：添加队伍映射表、slug 解析函数、自动匹配逻辑、手动映射配置支持","labels":["feature","ralph"]}
{"id":"predict-engine-0yh.1","title":"US-001: 添加电竞队伍缩写映射表","description":"在 sports-types.ts 中添加 LPL/LCK/LEC 等联赛的队伍缩写映射表。\n\n## Acceptance Criteria\n- [ ] 添加 LOL_TEAM_ABBR 映射表（队伍缩写 → 全名）\n- [ ] 添加 LOL_TEAM_ALIASES 映射表（别名 → 标准缩写）\n- [ ] 覆盖主要联赛：LPL, LCK, LEC, LCS\n- [ ] npx tsc --noEmit 通过","status":"closed","priority":1,"issue_type":"task","owner":"313818296@qq.com","created_at":"2026-01-23T14:35:49.3675995+08:00","created_by":"apri1one","updated_at":"2026-01-23T14:39:07.8589988+08:00","closed_at":"2026-01-23T14:39:07.8589988+08:00","close_reason":"已添加 LOL_TEAM_ABBR 和 LOL_TEAM_ALIASES 映射表，覆盖 LPL/LCK/LEC/LCS 主要联赛","labels":["ralph","task"],"dependencies":[{"issue_id":"predict-engine-0yh.1","depends_on_id":"predict-engine-0yh","type":"parent-child","created_at":"2026-01-23T14:35:49.3692585+08:00","created_by":"apri1one"}]}
{"id":"predict-engine-0yh.2","title":"US-002: 添加电竞 slug 解析函数","description":"在 sports-service.ts 中添加解析电竞市场 slug 的函数。\n\n## Acceptance Criteria\n- [ ] 添加 parseEsportsSlug 函数，解析 lol-{team1}-{team2}-{date} 格式\n- [ ] 支持规范化队伍缩写（使用 LOL_TEAM_ALIASES）\n- [ ] 返回 { sport, team1, team2, date } 结构\n- [ ] npx tsc --noEmit 通过","status":"closed","priority":1,"issue_type":"task","owner":"313818296@qq.com","created_at":"2026-01-23T14:35:57.6345689+08:00","created_by":"apri1one","updated_at":"2026-01-23T14:40:36.0185431+08:00","closed_at":"2026-01-23T14:40:36.0185431+08:00","close_reason":"已添加 parseEsportsSlug 和 esportsTeamsMatch 函数，支持规范化队伍缩写","labels":["ralph","task"],"dependencies":[{"issue_id":"predict-engine-0yh.2","depends_on_id":"predict-engine-0yh","type":"parent-child","created_at":"2026-01-23T14:35:57.6356219+08:00","created_by":"apri1one"},{"issue_id":"predict-engine-0yh.2","depends_on_id":"predict-engine-0yh.1","type":"blocks","created_at":"2026-01-23T14:35:58.0200505+08:00","created_by":"apri1one"}]}
{"id":"predict-engine-0yh.3","title":"US-003: 实现电竞市场匹配逻辑","description":"在 sports-service.ts 的 fetchAndMatchMarkets 中添加电竞市场匹配（方法 D）。\n\n## Acceptance Criteria\n- [ ] 筛选 Predict 电竞市场（categorySlug 包含 lol-）\n- [ ] 获取 Polymarket 电竞市场（tag_id=65, sports_market_types=moneyline）\n- [ ] 实现 slug 模式匹配（team1+team2+date）\n- [ ] 处理队伍顺序差异（A vs B 或 B vs A）\n- [ ] 添加日志输出匹配结果\n- [ ] npx tsc --noEmit 通过","status":"closed","priority":1,"issue_type":"task","owner":"313818296@qq.com","created_at":"2026-01-23T14:36:10.6076523+08:00","created_by":"apri1one","updated_at":"2026-01-23T14:41:49.8619766+08:00","closed_at":"2026-01-23T14:41:49.8619766+08:00","close_reason":"已在 fetchAndMatchMarkets 中添加方法 D 电竞市场匹配，支持 LPL/LCK/LEC/LCS 等联赛","labels":["ralph","task"],"dependencies":[{"issue_id":"predict-engine-0yh.3","depends_on_id":"predict-engine-0yh","type":"parent-child","created_at":"2026-01-23T14:36:10.6097881+08:00","created_by":"apri1one"},{"issue_id":"predict-engine-0yh.3","depends_on_id":"predict-engine-0yh.2","type":"blocks","created_at":"2026-01-23T14:36:11.00265+08:00","created_by":"apri1one"}]}
{"id":"predict-engine-0yh.4","title":"US-004: 添加手动映射配置支持","description":"添加手动映射配置文件支持，用于无法自动匹配的市场。\n\n## Acceptance Criteria\n- [ ] 创建 bot/data/esports-mapping.json 配置文件结构\n- [ ] 在 sports-service.ts 中加载手动映射\n- [ ] 手动映射优先级高于自动匹配\n- [ ] 支持 predictMarketId → polymarketConditionId 映射\n- [ ] npx tsc --noEmit 通过","status":"closed","priority":2,"issue_type":"task","owner":"313818296@qq.com","created_at":"2026-01-23T14:36:18.7682449+08:00","created_by":"apri1one","updated_at":"2026-01-23T14:50:41.3808774+08:00","closed_at":"2026-01-23T14:50:41.3808774+08:00","close_reason":"已创建 esports-mapping.json 配置文件并在 sports-service.ts 中添加加载逻辑，手动映射优先级最高","labels":["ralph","task"],"dependencies":[{"issue_id":"predict-engine-0yh.4","depends_on_id":"predict-engine-0yh","type":"parent-child","created_at":"2026-01-23T14:36:18.7693143+08:00","created_by":"apri1one"},{"issue_id":"predict-engine-0yh.4","depends_on_id":"predict-engine-0yh.3","type":"blocks","created_at":"2026-01-23T14:36:19.0815019+08:00","created_by":"apri1one"}]}
{"id":"predict-engine-0yh.5","title":"US-005: 更新 MatchMethod 类型和日志","description":"更新类型定义和日志输出以支持电竞市场。\n\n## Acceptance Criteria\n- [ ] 在 MatchMethod 类型中添加 'esports-slug' 选项\n- [ ] 更新匹配统计日志输出\n- [ ] 确保前端能正确显示电竞市场\n- [ ] npx tsc --noEmit 通过","status":"closed","priority":2,"issue_type":"task","owner":"313818296@qq.com","created_at":"2026-01-23T14:36:27.0588305+08:00","created_by":"apri1one","updated_at":"2026-01-23T14:43:42.3865719+08:00","closed_at":"2026-01-23T14:43:42.3865719+08:00","close_reason":"已更新 MatchMethod 和 SportType 类型，添加 esports-slug 匹配方法和 dota/cs/val 运动类型","labels":["ralph","task"],"dependencies":[{"issue_id":"predict-engine-0yh.5","depends_on_id":"predict-engine-0yh","type":"parent-child","created_at":"2026-01-23T14:36:27.0603867+08:00","created_by":"apri1one"},{"issue_id":"predict-engine-0yh.5","depends_on_id":"predict-engine-0yh.1","type":"blocks","created_at":"2026-01-23T14:36:27.4369225+08:00","created_by":"apri1one"}]}
